#
#  Nameserver records.
#
.<%= domain %>::a.ns.bytemark.co.uk:300
.<%= domain %>::b.ns.bytemark.co.uk:300
.<%= domain %>::c.ns.bytemark.co.uk:300

% if ipv4?
#
#  The domain name itself
#
=<%= domain %>:<%= ip %>:300

#
#  Useful aliases.
#
+ftp.<%= domain %>:<%= ip %>:300
+www.<%= domain %>:<%= ip %>:300
+mail.<%= domain %>:<%= ip %>:300

#
# A record for MX
#
+mx.<%= domain %>:<%= ip %>:300

% end
% if ipv6?
#
#  The domain name itself -- AAAA record and reverse.
#
6<%= domain %>:<%= ipv6 %>:300

#
#  Useful aliases -- AAAA records only
#
3ftp.<%= domain %>:<%= ipv6 %>:300
3www.<%= domain %>:<%= ipv6 %>:300
3mail.<%= domain %>:<%= ipv6 %>:300

#
# AAAA record for MX
#
3mx.<%= domain %>:<%= ipv6 %>:300

% end
% if bytemark_antispam?
#
# MX records for the Bytemark anti-spam service
#
# Tag my real records so only Bytemark can see them.  The IP is defined above,
# so not needed here.
#
@<%= domain %>::mx.<%= domain %>:5:300::nospam

#
# Tell the rest of the world to go via Bytemark
#
@<%= domain %>::a.nospam.bytemark.co.uk:5:300::world
@<%= domain %>::b.nospam.bytemark.co.uk:10:300::world

% else
#
#  MX record -- no IP defined, as this is done separately above.
#
@<%= domain %>::mx.<%= domain %>:15:300

% end
% if domain.respond_to?(:has_spf?) and domain.has_spf?
#
# SPF records
#
'<%= domain %>:<%= domain.spf_record %>:300

% end
% if domain.respond_to?(:has_dkim?) and domain.has_dkim?
#
# DKIM records
#
'<%= domain.dkim_selector %>._domainkey.<%= domain %>:v=DKIM1; k=rsa; p=<%= domain.dkim_public_key_b64 %>:300

% end
% if domain.respond_to?(:has_xmpp?) and domain.has_xmpp?
#
# SRV records for XMPP.
#
:_xmpp-client._tcp.<%= domain %>:33:<%= domain.srv_record_for(0,5,5222, domain) %>:300
:_xmpp-server._tcp.<%= domain %>:33:<%= domain.srv_record_for(0,5,5269, domain) %>:300

% end
%if domain.respond_to?(:mailboxes) and domain.mailboxes.length > 0
#
# SRV records for various mail services
#
:_submission._tcp.<%= domain %>:33:<%= domain.srv_record_for(0,5,587, "mail."+domain) %>:300
:_imap._tcp.<%= domain %>:33:<%= domain.srv_record_for(0,5,143, "mail."+domain) %>:300
:_imaps._tcp.<%= domain %>:33:<%= domain.srv_record_for(0,5,993, "mail."+domain) %>:300
:_pop3._tcp.<%= domain %>:33:<%= domain.srv_record_for(10,5,110, "mail."+domain) %>:300
:_pop3s._tcp.<%= domain %>:33:<%= domain.srv_record_for(10,5,995, "mail."+domain) %>:300

% end
