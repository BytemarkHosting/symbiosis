####
##
#
#  This file is automatically generated from the template located at
#  /etc/symbiosis/apache.d/non_ssl.template.erb.
#
#  Feel free to make changes to this file.  If changes are made, then this file
#  will not be updated automatically when the template changes.
#
##
###

% ips.each do |ip|
NameVirtualHost <%= ip %>:80
% end

<VirtualHost <%= ips.collect{|ip| ip+":80"}.join(" ") %>>

        #
        # Put our server name
        #
        ServerName  <%= domain %>


        #
        # And server alias in place
        #
        <%= server_aliases %>


        #
        #  Allow users to override settings via .htaccess
        #
        <Directory <%=domain_directory%> >
                AllowOverride all
        </Directory>

        #
        #  The document root
        #
        DocumentRoot     <%= htdocs_directory %>/

        #
        # General CGI Handling
        #
        ScriptAlias /cgi-bin/ <%= cgibin_directory %>/

        <Location /cgi-bin>
                Options +ExecCGI
        </Location>

        #
        # Disable indexes by default on the top-level.
        #
        <LocationMatch "^/+$">
                Options -Indexes
        </LocationMatch>

        #
        #  We need to log the virtual hostname the incoming request was
        # made against, so that the cron-job in /etc/cron.daily may generate
        # statistics for each domain.
        #
        ErrorLog   "|| /usr/sbin/symbiosis-apache-logger -s -u <%= domain.uid %> -g <%= domain.gid %> <%= domain.log_dir %>/error.log"
        CustomLog  "|| /usr/sbin/symbiosis-apache-logger -s -u <%= domain.uid %> -g <%= domain.gid %> <%= domain.log_dir %>/access.log" combined
</VirtualHost>

